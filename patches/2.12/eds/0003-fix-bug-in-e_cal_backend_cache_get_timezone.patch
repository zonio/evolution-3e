From 4b53b54162a86f6dabb76c4ad02204881c347df4 Mon Sep 17 00:00:00 2001
From: Ondrej Jirman <ondrej.jirman@zonio.net>
Date: Fri, 12 Oct 2007 13:57:12 +0200
Subject: [PATCH] fix bug in e_cal_backend_cache_get_timezone()

Invalid pointer was returned for invalid timezones.
---
 calendar/libedata-cal/e-cal-backend-cache.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/calendar/libedata-cal/e-cal-backend-cache.c b/calendar/libedata-cal/e-cal-backend-cache.c
index 66588e5..a3b6bd2 100644
--- a/calendar/libedata-cal/e-cal-backend-cache.c
+++ b/calendar/libedata-cal/e-cal-backend-cache.c
@@ -580,6 +580,7 @@ e_cal_backend_cache_get_timezone (ECalBackendCache *cache, const char *tzid)
 			else {
 				icalcomponent_free (icalcomp);
 				icaltimezone_free (zone, 1);
+        zone = NULL;
 			}
 		}
 	}
-- 
1.5.3.2.99-dirty

